<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Exercise 09</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div class="container">
      <h2 class="mt-4">To-Do List</h2>
      <form id="taskForm">
        <input
          type="text"
          id="taskDescription"
          class="form-control mt-3"
          placeholder="Task description"
          required
        />
        <select id="taskPriority" class="form-control mt-3">
          <option value="high">High</option>
          <option value="medium">Medium</option>
          <option value="low">Low</option>
        </select>
        <button type="submit" class="btn btn-primary mt-3">Add Task</button>
      </form>

      <ul id="taskList" class="list-group mt-4"></ul>
    </div>

    <script>
      const tasks = [];
      const priorities = {
        high: 1,
        medium: 2,
        low: 3,
      };

      //kap formen me id, listen to an event

      document
        .getElementById("taskForm")
        .addEventListener("submit", function (event) {
          event.preventDefault();
          //kap vlera e inputit dhe selectit
          const taskDescription = document.getElementById("taskDescription")
            .value;
          const taskPriority = document.getElementById("taskPriority").value;

          //shtoji brenda objektit
          tasks.push({
            name: taskDescription,
            priority: taskPriority,
          });
          console.log(tasks);
          displayTasks();
        });

      //shtoj ne DOM

      function displayTasks() {
        const ourEmptyList = document.getElementById("taskList"); //MARR UL
        ourEmptyList.innerHTML = ""; //FRESH NEW LIST

        //sort
        const sortedTasks = tasks.sort((a, b) => {
          return priorities[a.priority] - priorities[b.priority];
        });

        //itero qe te shfaqesh tasks
        sortedTasks.forEach((task) => {
          const listItem = document.createElement("li"); //krijo nje li
          listItem.textContent = `${task.name} - ${task.priority}`;
          listItem.classList.add("list-group-item");
          ourEmptyList.appendChild(listItem); //krijo nje text brenda li
          ourEmptyList.appendChild(listItem); //shtoja ul , prindit
        });
      }

      //clear form
      document.getElementById("taskForm").reset();
    </script>
  </body>
</html>
